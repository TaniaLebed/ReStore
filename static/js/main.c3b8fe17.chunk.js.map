{"version":3,"sources":["store.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","actions/index.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","to","onClick","fetchBooks","bookstoreService","dispatch","type","getBooks","then","data","payload","catch","err","bookAddedToCart","bookId","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","connect","bookList","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","shoppingCart","items","cartItems","total","orderTotal","item","idx","count","HomePage","CartPage","ShopHeader","numItems","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.c3b8fe17.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport reducer from \"./reducers\";\n\nconst logMiddleware = ({ getState, dispatch }) => (next) => (action) => {\n  console.log(action.type, getState());\n  return next(action);\n};\n\nconst stringMiddleware = () => (next) => (action) => {\n  if (typeof action === \"string\") {\n    return next({\n      type: action,\n    });\n  }\n\n  return next(action);\n};\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware)\n);\n\nconst delayedActionCreator = (timeout) => (dispatch) => {\n  setTimeout(\n    () =>\n      dispatch({\n        type: \"DELAYED_ACTION\",\n      }),\n    timeout\n  );\n};\n\nstore.dispatch(delayedActionCreator(3000));\n\nexport default store;\n","import BookListItem from \"./book-list-item\";\n\nexport default BookListItem;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./book-list-item.css\";\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <Link to=\"/book\">\n          <span className=\"book-title\">{title}</span>\n        </Link>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","const booksRequested = () => {\n  return {\n    type: \"FETCH_BOOKS_REQUEST\",\n  };\n};\n\nconst booksLoaded = (newBooks) => {\n  return {\n    type: \"FETCH_BOOKS_SUCCESS\",\n    payload: newBooks,\n  };\n};\n\nconst booksError = (error) => {\n  return {\n    type: \"FETCH_BOOKS_FAILURE\",\n    payload: error,\n  };\n};\n\nconst fetchBooks = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: \"BOOK_ADDED_TO_CART\",\n    payload: bookId,\n  };\n};\n\nconst bookRemovedFromCart = (bookId) => {\n  return {\n    type: \"BOOK_REMOVED_FROM_CART\",\n    payload: bookId,\n  };\n};\n\nconst allBooksRemovedFromCart = (bookId) => {\n  return {\n    type: \"ALL_BOOKS_REMOVED_FROM_CART\",\n    payload: bookId,\n  };\n};\n\nexport {\n  fetchBooks,\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart,\n};\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};\n","import React from \"react\";\nimport { BookstoreServiceConsumer } from \"../bookstore-service-context\";\n\nconst withBookstoreService = () => (Wrapped) => {\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {(bookstoreService) => {\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\n        }}\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './error-indicator.css';\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>;\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from \"react\";\nimport BookListItem from \"../book-list-item\";\nimport { connect } from \"react-redux\";\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\nimport { withBookstoreService } from \"../hoc\";\nimport Spinner from \"../spinner\";\nimport ErrorIndicator from \"../error-indicator\";\nimport \"./book-list.css\";\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"book-list\">\n      {books.map((book) => {\n        return (\n          <li key={book.id}>\n            <BookListItem\n              book={book}\n              onAddedToCart={() => onAddedToCart(book.id)}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispathToProps = (dispatch, { bookstoreService }) => {\n  return {\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\n    onAddedToCart: (id) => dispatch(bookAddedToCart(id)),\n  };\n};\n\nexport default withBookstoreService()(\n  connect(mapStateToProps, mapDispathToProps)(BookListContainer)\n);\n","import BookList from \"./book-list\";\n\nexport default BookList;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./shopping-cart-table.css\";\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart,\n} from \"../../actions/\";\n\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete,\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\"\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\"\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\"\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n\n      <div className=\"total\">Total: ${total}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal,\n  };\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemovedFromCart,\n  onDelete: allBooksRemovedFromCart,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from \"react\";\nimport BookList from \"../book-list\";\nimport ShoppingCartTable from \"../shopping-cart-table\";\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from \"react\";\n\nconst CartPage = () => {\n  return <div>Cart Page</div>;\n};\n\nexport default CartPage;\n","import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./shop-header.css\";\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to=\"/\">\n        <div className=\"logo text-dark\">ReStore</div>\n      </Link>\n      <Link to=\"/cart\">\n        <div className=\"shopping-cart\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItems} items (${total})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nexport default ShopHeader;\n","import App from './app';\n\nexport default App;\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport \"./app.css\";\nimport { HomePage, CartPage } from \"../pages\";\nimport ShopHeader from \"../shop-header\";\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItems={5} total={210} />\n      <Switch>\n        <Route path=\"/\" component={HomePage} exact />\n        <Route path=\"/cart\" component={CartPage} exact />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: \"Production-Ready Microservices\",\n      author: \"Susan J. Fowler\",\n      price: 32,\n      coverImage:\n        \"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\",\n    },\n    {\n      id: 2,\n      title: \"Release It!\",\n      author: \"Michael T. Nygard\",\n      price: 45,\n      coverImage:\n        \"https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg\",\n    },\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.75) {\n          reject(new Error(\"Something bad happened\"));\n        } else {\n          resolve(this.data);\n        }\n      }, 700);\n    });\n  }\n}\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    };\n  }\n\n  switch (action.type) {\n    case \"FETCH_BOOKS_REQUEST\":\n      return {\n        books: [],\n        loading: true,\n        error: null,\n      };\n\n    case \"FETCH_BOOKS_SUCCESS\":\n      return {\n        books: action.payload,\n        loading: false,\n        error: null,\n      };\n\n    case \"FETCH_BOOKS_FAILURE\":\n      return {\n        books: [],\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList;\n","const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price,\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems },\n  } = state;\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\n    orderTotal: 0,\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n    };\n  }\n  switch (action.type) {\n    case \"BOOK_ADDED_TO_CART\":\n      return updateOrder(state, action.payload, 1);\n\n    case \"BOOK_REMOVED_FROM_CART\":\n      return updateOrder(state, action.payload, -1);\n\n    case \"ALL_BOOKS_REMOVED_FROM_CART\":\n      const item = state.shoppingCart.cartItems.find(\n        ({ id }) => id === action.payload\n      );\n      return updateOrder(state, action.payload, -item.count);\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","import updateBookList from \"./book-list\";\nimport updateShoppingCart from \"./shopping-cart\";\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action),\n  };\n};\n\nexport default reducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport App from \"./components/app\";\nimport ErrorBoundry from \"./components/error-boundry\";\nimport BookstoreService from \"./services/bookstore-service\";\nimport { BookstoreServiceProvider } from \"./components/bookstore-service-context\";\nimport store from \"./store\";\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}